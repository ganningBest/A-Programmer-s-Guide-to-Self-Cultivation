<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¨‹åºå‘˜å¿ƒç†å¥åº·è‡ªæµ‹å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .welcome-card {
            text-align: center;
        }

        .welcome-card h2 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .rating-scale {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .rating-scale h3 {
            margin-bottom: 10px;
            color: #495057;
        }

        .scale-item {
            display: inline-block;
            margin: 5px 10px;
            padding: 5px 10px;
            background: #e9ecef;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .question-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .question-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .question {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 10px;
        }

        .rating-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .rating-btn {
            flex: 1;
            min-width: 60px;
            padding: 10px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9em;
        }

        .rating-btn:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .rating-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .results-card {
            display: none;
        }

        .results-card.show {
            display: block;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .result-score {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status-good { border-left-color: #28a745; }
        .status-fair { border-left-color: #ffc107; }
        .status-poor { border-left-color: #fd7e14; }
        .status-bad { border-left-color: #dc3545; }

        .recommendations {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .recommendations h3 {
            color: #0066cc;
            margin-bottom: 15px;
        }

        .recommendations ul {
            list-style-type: none;
            padding-left: 0;
        }

        .recommendations li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .recommendations li:before {
            content: "ğŸ’¡";
            position: absolute;
            left: 0;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .card {
                padding: 20px;
            }
            
            .rating-buttons {
                flex-direction: column;
            }
            
            .rating-btn {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§˜â€â™‚ï¸ ç¨‹åºå‘˜å¿ƒç†å¥åº·è‡ªæµ‹</h1>
            <p>å…³æ³¨å¿ƒç†å¥åº·ï¼Œæå‡ç”Ÿæ´»è´¨é‡</p>
        </div>

        <!-- æ¬¢è¿é¡µé¢ -->
        <div class="card welcome-card" id="welcome">
            <h2>æ¬¢è¿ä½¿ç”¨å¿ƒç†å¥åº·è‡ªæµ‹å·¥å…·</h2>
            <p>è¿™ä¸ªå·¥å…·å°†å¸®åŠ©æ‚¨å¿«é€Ÿè¯„ä¼°å¿ƒç†å¥åº·çŠ¶æ€ã€‚è¯·æ ¹æ®æœ€è¿‘ä¸¤å‘¨çš„æƒ…å†µï¼Œè¯šå®å›ç­”ä»¥ä¸‹é—®é¢˜ã€‚</p>
            
            <div class="rating-scale">
                <h3>è¯„åˆ†è¯´æ˜ï¼š</h3>
                <div class="scale-item">0 = ä»ä¸</div>
                <div class="scale-item">1 = å¶å°”</div>
                <div class="scale-item">2 = æœ‰æ—¶</div>
                <div class="scale-item">3 = ç»å¸¸</div>
                <div class="scale-item">4 = æ€»æ˜¯</div>
            </div>
            
            <button class="btn btn-primary" onclick="startAssessment()">å¼€å§‹è¯„ä¼°</button>
        </div>

        <!-- è¯„ä¼°é¡µé¢ -->
        <div class="card" id="assessment" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div id="questionSections">
                <!-- é—®é¢˜å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="navigation">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousSection()" disabled>ä¸Šä¸€æ­¥</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextSection()">ä¸‹ä¸€æ­¥</button>
            </div>
        </div>

        <!-- ç»“æœé¡µé¢ -->
        <div class="card results-card" id="results">
            <h2>ğŸ“Š è¯„ä¼°ç»“æœ</h2>
            <div id="overallResult"></div>
            <div id="detailedResults"></div>
            <div id="recommendations"></div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="restartAssessment()">é‡æ–°è¯„ä¼°</button>
                <button class="btn btn-secondary" onclick="downloadResults()">ä¸‹è½½ç»“æœ</button>
            </div>
        </div>
    </div>

    <script>
        // è¯„ä¼°é—®é¢˜æ•°æ®
        const assessmentData = {
            stress: {
                title: "å‹åŠ›æ°´å¹³è¯„ä¼°",
                questions: [
                    "æˆ‘æ„Ÿåˆ°å·¥ä½œå‹åŠ›å¾ˆå¤§",
                    "æˆ‘ç»å¸¸æ‹…å¿ƒå·¥ä½œä»»åŠ¡æ— æ³•å®Œæˆ", 
                    "æˆ‘éš¾ä»¥åœ¨å·¥ä½œåæ”¾æ¾",
                    "æˆ‘æ„Ÿåˆ°è¢«å·¥ä½œå‹å®",
                    "æˆ‘ç»å¸¸åŠ ç­åˆ°å¾ˆæ™š"
                ]
            },
            mood: {
                title: "æƒ…ç»ªçŠ¶æ€è¯„ä¼°",
                questions: [
                    "æˆ‘æ„Ÿåˆ°æ²®ä¸§æˆ–æŠ‘éƒ",
                    "æˆ‘å¯¹å¹³æ—¶æ„Ÿå…´è¶£çš„äº‹ç‰©å¤±å»å…´è¶£",
                    "æˆ‘æ„Ÿåˆ°ç„¦è™‘æˆ–ç´§å¼ ",
                    "æˆ‘å®¹æ˜“å‘æ€’æˆ–çƒ¦èº",
                    "æˆ‘æ„Ÿåˆ°å­¤ç‹¬"
                ]
            },
            cognitive: {
                title: "è®¤çŸ¥åŠŸèƒ½è¯„ä¼°",
                questions: [
                    "æˆ‘éš¾ä»¥é›†ä¸­æ³¨æ„åŠ›",
                    "æˆ‘è®°å¿†åŠ›ä¸‹é™",
                    "æˆ‘å†³ç­–å›°éš¾",
                    "æˆ‘å­¦ä¹ æ–°æŠ€æœ¯æ„Ÿåˆ°å›°éš¾",
                    "æˆ‘åˆ›é€ åŠ›ä¸‹é™"
                ]
            },
            physical: {
                title: "èº«ä½“ç—‡çŠ¶è¯„ä¼°",
                questions: [
                    "æˆ‘æ„Ÿåˆ°ç–²åŠ³æˆ–ç²¾åŠ›ä¸è¶³",
                    "æˆ‘ç¡çœ è´¨é‡å·®",
                    "æˆ‘æœ‰å¤´ç—›æˆ–èº«ä½“ç–¼ç—›",
                    "æˆ‘é£Ÿæ¬²å‘ç”Ÿå˜åŒ–",
                    "æˆ‘ç»å¸¸ç”Ÿç—…"
                ]
            },
            social: {
                title: "ç¤¾äº¤å…³ç³»è¯„ä¼°",
                questions: [
                    "æˆ‘é¿å…ä¸åŒäº‹äº¤æµ",
                    "æˆ‘ä¸æ„¿å‚åŠ å›¢é˜Ÿæ´»åŠ¨",
                    "æˆ‘æ„Ÿåˆ°äººé™…å…³ç³»ç´§å¼ ",
                    "æˆ‘éš¾ä»¥è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•",
                    "æˆ‘å€¾å‘äºç‹¬è‡ªæ‰¿æ‹…é—®é¢˜"
                ]
            }
        };

        let currentSection = 0;
        let responses = {};
        const sectionKeys = Object.keys(assessmentData);

        function startAssessment() {
            document.getElementById('welcome').style.display = 'none';
            document.getElementById('assessment').style.display = 'block';
            generateQuestions();
            updateProgress();
        }

        function generateQuestions() {
            const container = document.getElementById('questionSections');
            container.innerHTML = '';

            sectionKeys.forEach((key, index) => {
                const section = assessmentData[key];
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'question-section';
                sectionDiv.id = `section-${index}`;
                
                if (index === 0) sectionDiv.classList.add('active');

                sectionDiv.innerHTML = `
                    <h3 class="section-title">${section.title}</h3>
                    ${section.questions.map((question, qIndex) => `
                        <div class="question">
                            <div class="question-text">${qIndex + 1}. ${question}</div>
                            <div class="rating-buttons">
                                ${[0, 1, 2, 3, 4].map(rating => `
                                    <button class="rating-btn" 
                                            onclick="selectRating('${key}', ${qIndex}, ${rating})"
                                            data-section="${key}" 
                                            data-question="${qIndex}" 
                                            data-rating="${rating}">
                                        ${rating}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                `;

                container.appendChild(sectionDiv);
            });
        }

        function selectRating(section, questionIndex, rating) {
            if (!responses[section]) responses[section] = {};
            responses[section][questionIndex] = rating;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const buttons = document.querySelectorAll(`[data-section="${section}"][data-question="${questionIndex}"]`);
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');

            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            prevBtn.disabled = currentSection === 0;

            if (currentSection === sectionKeys.length - 1) {
                const allAnswered = checkAllAnswered();
                nextBtn.textContent = 'æŸ¥çœ‹ç»“æœ';
                nextBtn.disabled = !allAnswered;
            } else {
                nextBtn.textContent = 'ä¸‹ä¸€æ­¥';
                nextBtn.disabled = false;
            }
        }

        function checkAllAnswered() {
            return sectionKeys.every(key => {
                const sectionQuestions = assessmentData[key].questions.length;
                return responses[key] && Object.keys(responses[key]).length === sectionQuestions;
            });
        }

        function nextSection() {
            if (currentSection === sectionKeys.length - 1) {
                showResults();
                return;
            }

            document.getElementById(`section-${currentSection}`).classList.remove('active');
            currentSection++;
            document.getElementById(`section-${currentSection}`).classList.add('active');
            updateProgress();
            updateNavigationButtons();
        }

        function previousSection() {
            if (currentSection > 0) {
                document.getElementById(`section-${currentSection}`).classList.remove('active');
                currentSection--;
                document.getElementById(`section-${currentSection}`).classList.add('active');
                updateProgress();
                updateNavigationButtons();
            }
        }

        function updateProgress() {
            const progress = ((currentSection + 1) / sectionKeys.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function calculateResults() {
            const results = {};
            let totalScore = 0;
            let maxScore = 0;

            sectionKeys.forEach(key => {
                const sectionResponses = responses[key];
                const sectionScore = Object.values(sectionResponses).reduce((sum, score) => sum + score, 0);
                const sectionMaxScore = assessmentData[key].questions.length * 4;
                
                results[key] = {
                    score: sectionScore,
                    maxScore: sectionMaxScore,
                    percentage: (sectionScore / sectionMaxScore) * 100
                };

                totalScore += sectionScore;
                maxScore += sectionMaxScore;
            });

            results.total = {
                score: totalScore,
                maxScore: maxScore,
                percentage: (totalScore / maxScore) * 100
            };

            return results;
        }

        function interpretResults(results) {
            const totalPercentage = results.total.percentage;
            
            let overall;
            if (totalPercentage <= 25) {
                overall = { level: "è‰¯å¥½", description: "å¿ƒç†å¥åº·çŠ¶æ€è‰¯å¥½ï¼Œç»§ç»­ä¿æŒï¼", color: "good", emoji: "ğŸŸ¢" };
            } else if (totalPercentage <= 50) {
                overall = { level: "ä¸€èˆ¬", description: "éœ€è¦å…³æ³¨æŸäº›æ–¹é¢ï¼Œå»ºè®®é‡‡å–ä¸€äº›æ”¹è¿›æªæ–½ã€‚", color: "fair", emoji: "ğŸŸ¡" };
            } else if (totalPercentage <= 75) {
                overall = { level: "è¾ƒå·®", description: "å­˜åœ¨æ˜æ˜¾çš„å¿ƒç†å¥åº·é—®é¢˜ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚", color: "poor", emoji: "ğŸŸ " };
            } else {
                overall = { level: "å¾ˆå·®", description: "å¿ƒç†å¥åº·çŠ¶å†µä»¤äººæ‹…å¿§ï¼Œå¼ºçƒˆå»ºè®®ç«‹å³å’¨è¯¢ä¸“ä¸šäººå£«ã€‚", color: "bad", emoji: "ğŸ”´" };
            }

            return { overall, results };
        }

        function showResults() {
            const results = calculateResults();
            const interpretation = interpretResults(results);
            
            document.getElementById('assessment').style.display = 'none';
            document.getElementById('results').classList.add('show');

            displayResults(interpretation);
            displayRecommendations(interpretation.overall.level);
        }

        function displayResults(interpretation) {
            const { overall, results } = interpretation;
            
            // æ€»ä½“ç»“æœ
            document.getElementById('overallResult').innerHTML = `
                <div class="result-item status-${overall.color}">
                    <div>
                        <strong>${overall.emoji} æ€»ä½“è¯„ä¼°: ${overall.level}</strong>
                        <div>${overall.description}</div>
                    </div>
                    <div class="result-score">${results.total.score}/${results.total.maxScore} (${overall.percentage || results.total.percentage.toFixed(1)}%)</div>
                </div>
            `;

            // è¯¦ç»†ç»“æœ
            const categoryNames = {
                stress: "å‹åŠ›æ°´å¹³",
                mood: "æƒ…ç»ªçŠ¶æ€",
                cognitive: "è®¤çŸ¥åŠŸèƒ½", 
                physical: "èº«ä½“ç—‡çŠ¶",
                social: "ç¤¾äº¤å…³ç³»"
            };

            const detailedHtml = sectionKeys.map(key => {
                const result = results[key];
                const percentage = result.percentage;
                let status, emoji;
                
                if (percentage <= 25) {
                    status = "good"; emoji = "ğŸŸ¢";
                } else if (percentage <= 50) {
                    status = "fair"; emoji = "ğŸŸ¡";
                } else if (percentage <= 75) {
                    status = "poor"; emoji = "ğŸŸ ";
                } else {
                    status = "bad"; emoji = "ğŸ”´";
                }

                return `
                    <div class="result-item status-${status}">
                        <div>${emoji} ${categoryNames[key]}</div>
                        <div class="result-score">${result.score}/${result.maxScore} (${percentage.toFixed(1)}%)</div>
                    </div>
                `;
            }).join('');

            document.getElementById('detailedResults').innerHTML = `
                <h3>ğŸ“ˆ å„ç»´åº¦è¯¦æƒ…</h3>
                ${detailedHtml}
            `;
        }

        function displayRecommendations(level) {
            const recommendations = {
                "è‰¯å¥½": [
                    "ç»§ç»­ä¿æŒè‰¯å¥½çš„å·¥ä½œç”Ÿæ´»å¹³è¡¡",
                    "å®šæœŸè¿›è¡Œè‡ªæˆ‘è¯„ä¼°",
                    "å¸®åŠ©å…¶ä»–åŒäº‹ç»´æŠ¤å¿ƒç†å¥åº·",
                    "ä¿æŒå¥åº·çš„ç”Ÿæ´»ä¹ æƒ¯"
                ],
                "ä¸€èˆ¬": [
                    "å­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§",
                    "æ”¹å–„ç¡çœ è´¨é‡",
                    "å¢åŠ è¿åŠ¨å’Œæ”¾æ¾æ´»åŠ¨",
                    "å¯»æ±‚åŒäº‹æˆ–æœ‹å‹çš„æ”¯æŒ"
                ],
                "è¾ƒå·®": [
                    "è€ƒè™‘å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢",
                    "è°ƒæ•´å·¥ä½œå¼ºåº¦å’ŒèŠ‚å¥",
                    "å­¦ä¹ æƒ…ç»ªè°ƒèŠ‚æŠ€å·§",
                    "å»ºç«‹æ›´å¥½çš„æ”¯æŒç½‘ç»œ"
                ],
                "å¾ˆå·®": [
                    "ç«‹å³å¯»æ±‚ä¸“ä¸šå¿ƒç†å¥åº·å¸®åŠ©",
                    "è€ƒè™‘æš‚æ—¶å‡å°‘å·¥ä½œå‹åŠ›",
                    "å‘ŠçŸ¥ä¿¡ä»»çš„äººæ‚¨çš„çŠ¶å†µ",
                    "å…³æ³¨è‡ªæ€é¢„é˜²èµ„æº"
                ]
            };

            const recs = recommendations[level] || recommendations["ä¸€èˆ¬"];
            
            document.getElementById('recommendations').innerHTML = `
                <div class="recommendations">
                    <h3>ğŸ’¡ æ”¹è¿›å»ºè®®</h3>
                    <ul>
                        ${recs.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                        <strong>æ›´å¤šèµ„æºï¼š</strong><br>
                        â€¢ å®Œæ•´æŒ‡å—: <a href="https://github.com/yourusername/ç¨‹åºå‘˜ä¿®å¿ƒæŒ‡å—" target="_blank">ç¨‹åºå‘˜ä¿®å¿ƒæŒ‡å—</a><br>
                        â€¢ ä¸“ä¸šå¸®åŠ©: å¦‚éœ€ä¸“ä¸šå¿ƒç†å’¨è¯¢ï¼Œè¯·è”ç³»å½“åœ°å¿ƒç†å¥åº·æœºæ„
                    </p>
                </div>
            `;
        }

        function restartAssessment() {
            currentSection = 0;
            responses = {};
            document.getElementById('results').classList.remove('show');
            document.getElementById('welcome').style.display = 'block';
        }

        function downloadResults() {
            const results = calculateResults();
            const interpretation = interpretResults(results);
            
            const data = {
                timestamp: new Date().toISOString(),
                results: results,
                interpretation: interpretation
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `å¿ƒç†å¥åº·è¯„ä¼°ç»“æœ_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigationButtons();
        });
    </script>
</body>
</html>
